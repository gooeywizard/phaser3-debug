!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.phaser3Debugger=t():e.phaser3Debugger=t()}(window,function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}s.r(t);var a=function(e){function t(){var e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=o(this,r(t).call(this,{key:"Debug",active:!1}));return s=Object.assign({props:["x","y","angle"],color:"#da4d4d",pauseKey:"P",helpKey:"ESC",pauseOnCollisions:!1,pauseOnCollisionsKey:"C",showBodies:!1,showBodiesKey:"B",showFps:!1,showFpsKey:"F"},s),e.globalProps=s.props,e.style={font:"12px Arial",fill:s.color,stroke:s.color,strokeThickness:1},e.pauseKey=s.pauseKey,e.pauseOnCollisions=s.pauseOnCollisions,e.pauseOnCollisionsKey=s.pauseOnCollisionsKey,e.showBodies=s.showBodies,e.showBodiesKey=s.showBodiesKey,e.showFps=s.showFps,e.showFpsKey=s.showFpsKey,e.debugScene={children:{list:[]}},e.debug=[],e}var s,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,Phaser.Scene),s=t,(n=[{key:"init",value:function(e){var t=this;this.debugScene=e,this.stepDelay=null,this.stepDelay&&this.game.events.on("prestep",function(e,s){for(var n=(new Date).getTime(),i=0;i<1e7&&!((new Date).getTime()-n>t.stepDelay);i++);}),this.showBodies&&this.enablePhysicsDebugging(),this.pauseOnCollisions&&this.debugScene.matter&&Phaser.Physics.Matter.Matter.Events.on(this.debugScene.matter.world.engine,"collisionStart",function(e){for(var t=0;t<e.pairs.length;t++){var s=e.pairs[t];Phaser.Physics.Matter.Matter.Events.trigger(s.bodyA,"collision",{pair:s}),Phaser.Physics.Matter.Matter.Events.trigger(s.bodyB,"collision",{pair:s})}}),this.showFps&&this.enableShowFps();for(var s=this.debugScene.children.list,n=0;n<s.length;n++){var i=s[n];if(this.isDebuggable(i)){for(var o=i.x-i.width,r=i.y+2*i.height,u={child:i},a=this.getProps(i),l=0;l<a.length;l++){var h=a[l],c=this.getValue(i,h);u[h]=this.add.text(o,r+16*l,h+": "+c,this.style)}this.pauseOnCollisions&&i.body&&this.addCollisionListener(i.body),this.debug.push(u)}}this.isPaused=!1,this.input.keyboard.on("keydown_"+this.pauseKey,function(e){t.isPaused?t.resumeScene():t.pauseScene()}),this.input.keyboard.on("keydown_"+this.pauseOnCollisionsKey,function(e){t.pauseOnCollisions?t.disablePauseOnCollisions():t.enablePauseOnCollisions()}),this.input.keyboard.on("keydown_"+this.showBodiesKey,function(e){t.showBodies?t.disableShowBodies():t.enableShowBodies()}),this.input.keyboard.on("keydown_"+this.showFpsKey,function(e){t.showFps?t.disableShowFps():t.enableShowFps()})}},{key:"update",value:function(){this.fpsText&&this.fpsText.setText("FPS: "+this.game.loop.actualFps.toFixed(2));for(var e=0;e<this.debug.length;e++)for(var t=this.debug[e],s=t.child,n=s.x-s.width/2,i=s.y+s.height/2,o=this.getProps(s),r=0;r<o.length;r++){var u=o[r],a=this.getValue(s,u);t[u].setText(u+": "+a),t[u].x=n,t[u].y=i+16*r}}},{key:"isDebuggable",value:function(e){return!0===e.debug||e.debug instanceof Array}},{key:"getProps",value:function(e){return e.debug instanceof Array?e.debug:this.globalProps}},{key:"getValue",value:function(e,t){var s=e[t];return Number.isFinite(s)&&(s=s.toFixed(2)),s}},{key:"enablePhysicsDebugging",value:function(){this.debugScene.matter&&(this.debugScene.matter.world.drawDebug=!0,this.debugScene.matter.world.createDebugGraphic(),this.debugScene.events.once("shutdown",this.disablePhysicsDebugging,this))}},{key:"disablePhysicsDebugging",value:function(){this.debugScene.matter&&(this.debugScene.matter.world.drawDebug=!1)}},{key:"pauseScene",value:function(){this.game.scene.pause(this.debugScene.scene.key),this.isPaused=!0}},{key:"resumeScene",value:function(){this.game.scene.resume(this.debugScene.scene.key),this.isPaused=!1}},{key:"disablePauseOnCollisions",value:function(){this.pauseOnCollisions=!1;for(var e=0;e<this.debug.length;e++){var t=this.debug[e].child.body;t&&this.removeCollisionListener(t)}}},{key:"enablePauseOnCollisions",value:function(){this.pauseOnCollisions=!0;for(var e=0;e<this.debug.length;e++){var t=this.debug[e].child.body;t&&this.addCollisionListener(t)}}},{key:"addCollisionListener",value:function(e){var t=this;this.debugScene.matter&&Phaser.Physics.Matter.Matter.Events.on(e,"collision",function(e){t.pauseScene()})}},{key:"removeCollisionListener",value:function(e){this.debugScene.matter&&Phaser.Physics.Matter.Matter.Events.off(e,"collision")}},{key:"disableShowBodies",value:function(){this.showBodies=!1,this.disablePhysicsDebugging()}},{key:"enableShowBodies",value:function(){this.showBodies=!0,this.enablePhysicsDebugging()}},{key:"disableShowFps",value:function(){this.showFps=!1,this.fpsText.destroy(),this.fpsText=null}},{key:"enableShowFps",value:function(){this.showFps=!0,this.fpsText=this.add.text(20,20,"FPS: "+this.game.loop.actualFps.toFixed(2),this.style)}}])&&i(s.prototype,n),a&&i(s,a),t}();t.default=a}])});